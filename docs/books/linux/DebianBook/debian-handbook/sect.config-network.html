<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>8.2. Configuring the Network</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="generator" content="publican 3.0" /><meta name="package" content="Debian-debian-handbook-6.0-en-US-1.0-1" /><meta name="keywords" content="Configuration, Localization, Locales, Network, Name resolution, Users, Groups, Accounts, Command-line interpreter, Shell, Printing, Bootloader, Kernel compiling" /><link rel="home" href="index.html" title="The Debian Administrator's Handbook" /><link rel="up" href="basic-configuration.html" title="Chapter 8. Basic Configuration: Network, Accounts, Printing..." /><link rel="prev" href="basic-configuration.html" title="Chapter 8. Basic Configuration: Network, Accounts, Printing..." /><link rel="next" href="sect.hostname-name-service.html" title="8.3. Setting the Hostname and Configuring the Name Service" /></head><body><p class="hidden" id="title"><a class="left" href="http://www.debian.org"><img src="Common_Content/images/image_left.png" alt="Product Site" /></a><a class="right" href="http://debian-handbook.info"><img src="Common_Content/images/image_right.png" alt="Documentation Site" /></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="basic-configuration.html"><strong>Prev</strong></a></li><li class="home">The Debian Administrator's Handbook</li><li class="next"><a accesskey="n" href="sect.hostname-name-service.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h2 class="title" id="sect.config-network">8.2. Configuring the Network</h2></div></div></div><div class="sidebar"><a xmlns="" id="sidebar.rappels-reseau"></a><div class="titlepage"><div><div><h6><span class="emphasis"><em>BACK TO BASICS</em></span> Essential network concepts (Ethernet, IP address, subnet, broadcast).</h6></div></div></div><a id="idp12769984" class="indexterm"></a><a id="idp12770464" class="indexterm"></a><a id="idp12770944" class="indexterm"></a><a id="idp12771424" class="indexterm"></a><a id="idp12771904" class="indexterm"></a><a id="idp12772384" class="indexterm"></a><a id="idp12772848" class="indexterm"></a><div class="para"><p></p>
			Most modern local networks use the Ethernet protocol, where data is split into small blocks called frames and transmitted on the wire one frame at a time. Data speeds vary from 10 Mb/s for older Ethernet cards to 10 Gb/s in the newest cards (with the most common rate currently growing from 100 Mb/s to 1 Gb/s). The most widely used cables are called 10BASE-T, 100BASE-T, 1000BASE-T or 10GBASE-T depending on the throughput they can reliably provide (the T stands for “twisted pair”); those cables end in an RJ45 connector. There are other cable types, used mostly for speeds in above 1 Gb/s.
		</div><a id="idp12774152" class="indexterm"></a><a id="idp12774632" class="indexterm"></a><div class="para"><p></p>
			An IP address is a number used to identify a network interface on a computer on a local network or the Internet. In the currently most widespread version of IP (IPv4), this number is encoded in 32 bits, and is usually represented as 4 numbers separated by periods (e.g. <code class="literal">192.168.0.1</code>), each number being between 0 and 255 (inclusive, which corresponds to 8 bits of data). The next version of the protocol, IPv6, extends this addressing space to 128 bits, and the addresses are generally represented as series of hexadecimal numbers separated by colons (e.g., 2002:58bf:13bb:0002:0000:0000:0020, or 2002:58bf:13bb:2::20 for short).
		</div><a id="idp12776440" class="indexterm"></a><a id="idp12776920" class="indexterm"></a><a id="idp9739152" class="indexterm"></a><div class="para"><p></p>
			A subnet mask (netmask) defines in its binary code which portion of an IP address corresponds to the network, the remainder specifying the machine. In the example of configuring a static IPv4 address given here, the subnet mask, <code class="literal">255.255.255.0</code> (24 “1”s followed by 8 “0”s in binary representation) indicates that the first 24 bits of the IP address correspond to the network address, and the other 8 are specific to the machine. In IPv6, for readability, only the number of “1”s is expressed; the netmask for an IPv6 network could, thus, be <code class="literal">64</code>.
		</div><div class="para"><p></p>
			The network address is an IP address in which the part describing the machine's number is 0. The range of IPv4 addresses in a complete network is often indicated by the syntax, <span class="emphasis"><em>a.b.c.d/e</em></span>, in which <span class="emphasis"><em>a.b.c.d</em></span> is the network address and <span class="emphasis"><em>e</em></span> is the name of the bits affected by the network part in an IP address. The example network would be written thus: <code class="literal">192.168.0.0/24</code>. The syntax is similar in IPv6: <code class="literal">2002:58bf:13bb::/64</code>.
		</div><a id="idp9742800" class="indexterm"></a><a id="idp9743280" class="indexterm"></a><div class="para"><p></p>
			A router is a machine that connects several networks to each other. All traffic coming through a router is guided to the correct network. To do this, the router analyses incoming packets and redirects them according to the IP address of their destination. The router is often known as a gateway; in this configuration, it works as a machine that helps reach out beyond a local network (towards an extended network, such as the Internet).
		</div><a id="idp9744440" class="indexterm"></a><div class="para"><p></p>
			The special broadcast address connects all the stations in a network. Almost never “routed”, it only functions on the network in question. Specifically, it indicates that a data packet address to the broadcast never passes through the router.
		</div><div class="para"><p></p>
			This chapter focuses on IPv4 addresses, since they are currently the most commonly used. The details of the IPv6 protocol are approached in <a class="xref" href="sect.ipv6.html">Section 10.5, “IPv6”</a>, but the concepts remain the same.
		</div></div><div class="para"><p></p>
			Since the network is automatically configured during the initial installation, the <code class="filename">/etc/network/interfaces</code> file already contains a valid configuration. A line starting with <code class="literal">auto</code> gives a list of interfaces to be automatically configured on boot. This will often be <code class="literal">eth0</code>, which refers to the first Ethernet card.
		</div><a id="idp9747360" class="indexterm"></a><a id="idp9748064" class="indexterm"></a><a id="idp9748752" class="indexterm"></a><a id="idp9749472" class="indexterm"></a><div class="section"><div class="titlepage"><div><div><h3 class="title" id="section.interface-ethernet">8.2.1. Ethernet Interface</h3></div></div></div><div class="para"><p></p>
				If the computer has an Ethernet card, the network that is associated with it must be configured by choosing from one of two methods. The simplest method is dynamic configuration with DHCP, and it requires a DHCP server on the local network. It may indicate a desired hostname, corresponding to the <code class="literal">hostname</code> setting in the example below. The DHCP server then sends configuration settings for the appropriate network. 
				<a id="idp9751352" class="indexterm"></a>
				 <a id="idp9751832" class="indexterm"></a>
			</div><div class="example"><h6>Example 8.1. DHCP configuration</h6><div class="example-contents"><pre class="programlisting">
auto eth0
iface eth0 inet dhcp
  hostname arrakis
</pre></div></div><br class="example-break" /><div class="para"><p></p>
				A “static” configuration must indicate network settings in a fixed manner. This includes at least the IP address and subnet mask; network and broadcast addresses are also sometimes listed. A router connecting to the exterior will be specified as a gateway.
			</div><div class="example"><h6>Example 8.2. Static configuration</h6><div class="example-contents"><pre class="programlisting">
auto eth0
iface eth0 inet static
  address 192.168.0.3
  netmask 255.255.255.0
  broadcast 192.168.0.255
  network 192.168.0.0
  gateway 192.168.0.1
</pre></div></div><br class="example-break" /><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>NOTE</em></span> Multiple addresses</h6></div></div></div><div class="para"><p></p>
				It is possible not only to associate several interfaces to a single, physical network card, but also several IP addresses to a single interface. Remember also that an IP address may correspond to any number of names via DNS, and that a name may also correspond to any number of numerical IP addresses.
			</div><div class="para"><p></p>
				As you can guess, the configurations can be rather complex, but these options are only used in very special cases. The examples cited here are typical of the usual configurations.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title" id="section.ppp-rtc">8.2.2. Connecting with PPP through a PSTN Modem</h3></div></div></div><a id="idp9756920" class="indexterm"></a><a id="idp9757400" class="indexterm"></a><a id="idp9757864" class="indexterm"></a><a id="idp9758568" class="indexterm"></a><div class="para"><p></p>
				A point to point (PPP) connection establishes an intermittent connection; this is the most common solution for connections made with a telephone modem (“PSTN modem”, since the connection goes over the public switched telephone network).
			</div><div class="para"><p></p>
				A connection by telephone modem requires an account with an access provider, including a telephone number, username, password, and, sometimes the authentication protocol to be used. Such a connection is configured using the <code class="command">pppconfig</code> tool in the Debian package of the same name. By default, it uses the access provider's connection. When in doubt about the authentication protocol, choose <span class="emphasis"><em>PAP</em></span>: it is offered by the majority of Internet service providers.
			</div><a id="idp9760920" class="indexterm"></a><a id="idp9761480" class="indexterm"></a><div class="para"><p></p>
				After configuration, it is possible to connect using the <code class="command">pon</code> command (giving it the name of the connection as a parameter, when the default value of <code class="literal">provider</code> is not appropriate). The link is disconnected with the <code class="command">poff</code> command. These two commands can be executed by the root user, or by any other user, provided they are in the <code class="literal">dip</code> group.
			</div><a id="idp9763448" class="indexterm"></a><a id="idp9764008" class="indexterm"></a><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>TOOL</em></span> On-demand connection with <code class="command">diald</code></h6></div></div></div><a id="idp9765272" class="indexterm"></a><a id="idp9765832" class="indexterm"></a><div class="para"><p></p>
				<code class="command">diald</code> is an on-demand connection service that automatically establishes a connection when needed, by detecting an outgoing IP packet and disconnecting after a period of inactivity.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title" id="section.adsl">8.2.3. Connecting through an ADSL Modem</h3></div></div></div><a id="idp9767920" class="indexterm"></a><a id="idp9768624" class="indexterm"></a><a id="idp9769344" class="indexterm"></a><div class="para"><p></p>
				The generic term “ADSL modem” covers a multitude of devices with very different functions. The modems that are simplest to use with Linux are those that have an Ethernet interface. These tend to be popular; ADSL Internet service providers lend (or lease) a “box” with Ethernet interfaces more and more frequently, instead of those with USB interfaces. According to the type of modem, the configuration required can vary widely.
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title" id="section.adsl-pppoe">8.2.3.1. Modems Supporting PPPOE</h4></div></div></div><a id="idp9771024" class="indexterm"></a><a id="idp9771504" class="indexterm"></a><div class="para"><p></p>
					Some Ethernet modems work with the PPPOE protocol (Point to Point Protocol over Ethernet). The <code class="command">pppoeconf</code> tool (from the package with the same name) will configure the connection. To do so, it modifies the <code class="filename">/etc/ppp/peers/dsl-provider</code> file with the settings provided and records the login information in the <code class="filename">/etc/ppp/pap-secrets</code> and <code class="filename">/etc/ppp/chap-secrets</code> files. It is recommended to accept all modifications that it proposes.
				</div><div class="para"><p></p>
					Once this configuration is complete, you can open the ADSL connection with the command, <code class="command">pon dsl-provider</code> and disconnect with <code class="command">poff dsl-provider</code>.
				</div><a id="idp9774304" class="indexterm"></a><div class="sidebar fil"><div class="titlepage"><div><div><h6><span class="emphasis"><em>TIP</em></span> Starting <code class="command">ppp</code> via <code class="command">init</code></h6></div></div></div><a id="idp9775960" class="indexterm"></a><div class="para"><p></p>
					PPP connections over ADSL are, by definition, intermittent. Since they are not billed according to time, there are few downsides to the temptation of keeping them always open; one simple means to do so is to use the <code class="command">init</code> process to control the connection. All that's needed is to add a line such as the following at the end of the <code class="filename">/etc/inittab</code> file; then, any time the connection is disconnected, <code class="command">init</code> will reconnect it.
				</div><pre class="programlisting">
adsl:2345:respawn:/usr/sbin/pppd call dsl-provider
</pre><div class="para"><p></p>
					Most ADSL connections disconnect on a daily basis, but this method reduces the duration of the interruption.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title" id="section.adsl-pptp">8.2.3.2. Modems Supporting PPTP</h4></div></div></div><a id="idp9779120" class="indexterm"></a><div class="para"><p></p>
					The PPTP (Point-to-Point Tunneling Protocol) protocol was created by Microsoft. Deployed at the beginning of ADSL, it was quickly replaced by PPPOE. If this protocol is forced on you, see <a class="xref" href="network-infrastructure.html">Chapter 10, <em>Network Infrastructure</em></a> in the section about virtual private networks detailing PPTP.
				</div></div><div class="section"><div class="titlepage"><div><div><h4 class="title" id="section.adsl-dhcp">8.2.3.3. Modems Supporting DHCP</h4></div></div></div><div class="para"><p></p>
					When a modem is connected to the computer by an Ethernet cable (crossover cable) you typically configure a network connection by DHCP on the computer; the modem automatically acts as a gateway by default and takes care of routing (meaning that it manages the network traffic between the computer and the Internet).
				</div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>BACK TO BASICS</em></span> Crossover cable for a direct Ethernet connection</h6></div></div></div><a id="idp9782120" class="indexterm"></a><div class="para"><p></p>
					Computer network cards expect to receive data on specific wires in the cable, and send their data on others. When you connect a computer to a local network, you usually connect a cable (straight or crossover) between the network card and a repeater or switch. However, if you want to connect two computers directly (without an intermediary switch or repeater), you must route the signal sent by one card to the receiving side of the other card, and vice-versa. This is the purpose of a crossover cable, and the reason it is used.
				</div></div><div class="para"><p></p>
					In France, this method is used by Freebox, Neufbox, and Livebox, the ADSL modems provided by the Free, SFR/Neuf, and Wanadoo/Orange ISPs. It is also provided by most “ADSL routers” on the market.
				</div><a id="idp9783880" class="indexterm"></a><a id="idp9784360" class="indexterm"></a><a id="idp9784840" class="indexterm"></a></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title" id="sect.config-reseau-itinerante">8.2.4. Automatic Network Configuration for Roaming Users</h3></div></div></div><a id="idp9786216" class="indexterm"></a><a id="idp9786912" class="indexterm"></a><div class="para"><p></p>
				Many Falcot engineers have a laptop computer that, for professional purposes, they also use at home. The network configuration to use differs according to location. At home, it may be a wifi network (protected by a WEP key), while the workplace uses a wired network for greater security and more bandwidth.
			</div><div class="para"><p></p>
				To avoid having to manually connect or disconnect the corresponding network interfaces, administrators installed the <span class="pkg pkg">network-manager</span> package on these roaming machines. This software enables a user to easily switch from one network to another using a small icon displayed in the notification area of their graphical desktop. Clicking on this icon displays a list of available networks (both wired and wireless), so they can simply choose the network they wish to use. The program saves the configuration for the networks to which the user has already connected, and automatically switches to the best available network when the current connection drops.
			</div><div class="para"><p></p>
				In order to do this, the program is structured in two parts: a daemon running as root handles activation and configuration of network interfaces and a user interface controls this demon. Only members of the “netdev” group have permissions to control this program.
			</div><div class="para"><p></p>
				Network Manager knows how to handle various types of connections (DHCP, manual configuration, local network), but only if the configuration is set with the program itself. This is why it will systematically ignore all network interfaces in <code class="filename">/etc/network/interfaces</code> for which it is not suited. The settings are very strict; details are available in the <code class="filename">/usr/share/doc/network-manager/README.Debian</code> file. Since Network Manager doesn't give details when no network connections are shown, the easy way is to delete from (<code class="filename">/etc/network/interfaces</code>) any configuration for all interfaces that must be managed by Network Manager.
			</div><div class="para"><p></p>
				Note that this program is installed by default when the “Desktop Environment” task is chosen during initial installation.
			</div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>ALTERNATIVE</em></span> Configuration by “network profile”</h6></div></div></div><a id="idp9792304" class="indexterm"></a><div class="para"><p></p>
				More advanced users may want to try the <span class="pkg pkg">guessnet</span> package for automatic network configuration. A group of test scripts determine which network profile should be activated and configure it on the fly.
			</div><div class="para"><p></p>
				Users who prefer to manually select a network profile will prefer the <span class="pkg pkg">netenv</span> program, found in the package of the same name.
			</div></div></div></div><div id="site_footer"></div><script type="text/javascript">
		$("#site_footer").load("../../../../../footer.html");
	</script><ul class="docnav"><li class="previous"><a accesskey="p" href="basic-configuration.html"><strong>Prev</strong>Chapter 8. Basic Configuration: Network, Accounts...</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="sect.hostname-name-service.html"><strong>Next</strong>8.3. Setting the Hostname and Configuring the Nam...</a></li></ul></body></html>
