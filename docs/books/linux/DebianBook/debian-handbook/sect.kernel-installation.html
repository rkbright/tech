<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>8.11. Installing a Kernel</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="generator" content="publican 3.0" /><meta name="package" content="Debian-debian-handbook-6.0-en-US-1.0-1" /><meta name="keywords" content="Configuration, Localization, Locales, Network, Name resolution, Users, Groups, Accounts, Command-line interpreter, Shell, Printing, Bootloader, Kernel compiling" /><link rel="home" href="index.html" title="The Debian Administrator's Handbook" /><link rel="up" href="basic-configuration.html" title="Chapter 8. Basic Configuration: Network, Accounts, Printing..." /><link rel="prev" href="sect.kernel-compilation.html" title="8.10. Compiling a Kernel" /><link rel="next" href="unix-services.html" title="Chapter 9. Unix Services" /></head><body><p class="hidden" id="title"><a class="left" href="http://www.debian.org"><img src="Common_Content/images/image_left.png" alt="Product Site" /></a><a class="right" href="http://debian-handbook.info"><img src="Common_Content/images/image_right.png" alt="Documentation Site" /></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="sect.kernel-compilation.html"><strong>Prev</strong></a></li><li class="home">The Debian Administrator's Handbook</li><li class="next"><a accesskey="n" href="unix-services.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h2 class="title" id="sect.kernel-installation">8.11. Installing a Kernel</h2></div></div></div><a id="idp10720072" class="indexterm"></a><a id="idp10720776" class="indexterm"></a><div class="section"><div class="titlepage"><div><div><h3 class="title" id="section.paquet-noyau">8.11.1. Features of a Debian Kernel Package</h3></div></div></div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>GOING FURTHER</em></span> Special configurations </h6></div></div></div><a id="idp10722568" class="indexterm"></a><div class="para"><p></p>
				This section discusses the default behavior of a Debian Linux kernel package, but everything is configurable with the <code class="filename">/etc/kernel-img.conf</code> file. Consult the associated man page to learn more: <span class="citerefentry"><span class="refentrytitle">kernel-img.conf</span>(5)</span>
			</div></div><a id="idp10724328" class="indexterm"></a><div class="para"><p></p>
				A Debian kernel package installs the kernel image (<code class="filename">vmlinuz-<em class="replaceable"><code>version</code></em></code>), its configuration (<code class="filename">config-<em class="replaceable"><code>version</code></em></code>) and its symbols table (<code class="filename">System.map-<em class="replaceable"><code>version</code></em></code>) in <code class="filename">/boot/</code>. The symbols table table helps developers understand the meaning of a kernel error message; without it, kernel “oopses” (an “oops” is the kernel equivalent in the kernel of a segmentation fault for user space programs, in other words messages generated following an invalid pointer dereference) only contain numeric memory addresses, which is useless information without the table mapping these addresses to symbols and function names. The modules are installed in the <code class="filename">/lib/modules/<em class="replaceable"><code>version</code></em>/</code> directory.
			</div><div class="para"><p></p>
				The package's configuration scripts automatically generate an initrd image, which is a mini-system designed to be loaded in memory (hence the name, which stands for “init ramdisk”) by the bootloader, and used by the Linux kernel solely for loading the modules needed to access the devices containing the complete Debian system (for example, the driver for IDE disks). Finally, the post-installation scripts update the symbolic links <code class="filename">/vmlinuz</code>, <code class="filename">/vmlinuz.old</code>, <code class="filename">/initrd.img</code> and <code class="filename">/initrd.img.old</code> so that they point to the latest two kernels installed, respectively, as well as the corresponding initrd images.
			</div><div class="para"><p></p>
				<code class="command">lilo</code> can work with these symbolic links by automatically using the last kernel installed, while still allowing the machine to boot from the previous kernel if the last one installed doesn't work. This requires, however, that <code class="command">lilo</code> be run after each kernel installation. This can be automated, by setting <code class="literal">do_bootloader = yes</code> in <code class="filename">/etc/kernel-img.conf</code>.
			</div><div class="para"><p></p>
				In most cases, <code class="command">grub</code> will be your bootloader, and the default configuration will execute <code class="command">update-grub</code> after each installation or removal of a kernel in order for the <code class="filename">/boot/grub/grub.cfg</code> file (or <code class="filename">/boot/grub/menu.lst</code> with GRUB Legacy) to be updated. This allows all installed kernels to be displayed (and available) in the <span class="emphasis"><em>GRUB</em></span> menu at boot time.
			</div><div class="example"><h6>Example 8.7. Kernel package configuration file</h6><div class="example-contents"><pre class="programlisting">
do_symlinks = yes
relative_links = yes
do_bootloader = no
do_bootfloppy = no
do_initrd = yes
link_in_boot = no
postinst_hook = update-grub
postrm_hook = update-grub
</pre></div></div><br class="example-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title" id="section.installation-paquet-noyau">8.11.2. Installing with <code class="command">dpkg</code></h3></div></div></div><div class="para"><p></p>
				Using <code class="command">apt-get</code> is so convenient that it makes it easy to forget about the lower-level tools, but the easiest way of installing a compiled kernel is to use a command such as <code class="command">dpkg -i <em class="replaceable"><code>package</code></em>.deb</code>, where <code class="literal"><em class="replaceable"><code>package</code></em>.deb</code> is the name of a <span class="pkg pkg">linux-image</span> package such as <code class="filename">linux-image-2.6.32-falcot_1_i386.deb</code>.
			</div><div class="para"><p></p>
				The configuration steps described in this chapter are basic and can lead both to a server system or a workstation, and it can be massively duplicated in semi-automated ways. However, it is not enough by itself to provide a fully configured system. A few pieces are still in need of configuration, starting with low-level programs known as the “Unix services”.
			</div></div></div><div id="site_footer"></div><script type="text/javascript">
		$("#site_footer").load("../../../../../footer.html");
	</script><ul class="docnav"><li class="previous"><a accesskey="p" href="sect.kernel-compilation.html"><strong>Prev</strong>8.10. Compiling a Kernel</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="unix-services.html"><strong>Next</strong>Chapter 9. Unix Services</a></li></ul></body></html>
