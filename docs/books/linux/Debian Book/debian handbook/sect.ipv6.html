<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>10.5. IPv6</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="generator" content="publican 3.0" /><meta name="package" content="Debian-debian-handbook-6.0-en-US-1.0-1" /><meta name="keywords" content="Network, Gateway, TCP/IP, IPv6, DNS, Bind, DHCP, QoS" /><link rel="home" href="index.html" title="The Debian Administrator's Handbook" /><link rel="up" href="network-infrastructure.html" title="Chapter 10. Network Infrastructure" /><link rel="prev" href="sect.dynamic-routing.html" title="10.4. Dynamic Routing" /><link rel="next" href="sect.domain-name-servers.html" title="10.6. Domain Name Servers (DNS)" /></head><body><p class="hidden" id="title"><a class="left" href="http://www.debian.org"><img src="Common_Content/images/image_left.png" alt="Product Site" /></a><a class="right" href="http://debian-handbook.info"><img src="Common_Content/images/image_right.png" alt="Documentation Site" /></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="sect.dynamic-routing.html"><strong>Prev</strong></a></li><li class="home">The Debian Administrator's Handbook</li><li class="next"><a accesskey="n" href="sect.domain-name-servers.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h2 class="title" id="sect.ipv6">10.5. IPv6</h2></div></div></div><div class="para"><p></p>
			IPv6, successor to IPv4, is a new version of the IP protocol designed to fix its flaws, most notably the scarcity of available IP addresses. This protocol handles the network layer; its purpose is to provide a way to address machines, to convey data to their intended destination, and to handle data fragmentation if needed (in other words, to split packets into chunks with a size that depends on the network links to be used on the path and to reassemble the chunks in their proper order on arrival).
		</div><div class="para"><p></p>
			Debian kernels include IPv6 handling in the core kernel (which was not always the case; the <code class="literal">ipv6</code> module used to be optional). Basic tools such as <code class="command">ping</code> and <code class="command">traceroute</code> have their IPv6 equivalents in <code class="command">ping6</code> and <code class="command">traceroute6</code>, available respectively in the <span class="pkg pkg">iputils-ping</span> and <span class="pkg pkg">iputils-tracepath</span> packages.
		</div><a id="idp9240944" class="indexterm"></a><a id="idp9241424" class="indexterm"></a><a id="idp9242120" class="indexterm"></a><div class="para"><p></p>
			The IPv6 network is configured similarly to IPv4, in <code class="filename">/etc/network/interfaces</code>. But if you want that network to be globally available, you must ensure that you have an IPv6-capable router relaying traffic to the global IPv6 network.
		</div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>CULTURE</em></span> The 6bone</h6></div></div></div><a id="idp9244040" class="indexterm"></a><div class="para"><p></p>
			During the experimental phase of the IPv6 protocol, a global network infrastructure was set up to facilitate testing of the new protocol. That network was known as the <span class="foreignphrase"><em class="foreignphrase">6bone</em></span>, a contraction of the 6 in IPv6 and the <span class="emphasis"><em>network backbone</em></span>. This 6bone officially disappeared on the 6th of June, 2006 (note the omnipresence of the number 6), but the nickname is still used to refer to that part of the Internet capable of handling IPv6.
		</div></div><div class="example"><h6>Example 10.10. Example of IPv6 configuration</h6><div class="example-contents"><pre class="programlisting">
iface eth0 inet6 static
    address 3ffe:ffff:1234:5::1:1
    netmask 64
    # Disabling auto-configuration
    # up echo 0 &gt;/proc/sys/net/ipv6/conf/all/autoconf
    # The router is auto-configured and has no fixed address
    # (/proc/sys/net/ipv6/conf/all/accept_ra). If it had:
    # gateway 3ffe:ffff:1234:5::1
</pre></div></div><br class="example-break" /><div class="para"><p></p>
			If a native IPv6 connection is not available, the fallback method is to use a tunnel over IPv4. Freenet6 is one (free) provider of such tunnels: <div xmlns="" class="url">→ <a xmlns="http://www.w3.org/1999/xhtml" href="http://www.freenet6.net/">http://www.freenet6.net/</a></div>
		</div><a id="idp9247760" class="indexterm"></a><div class="para"><p></p>
			To use a Freenet6 tunnel, you need to register on the website, then install the <span class="pkg pkg">tspc</span> package and configure the tunnel. This requires editing the <code class="filename">/etc/tsp/tspc.conf</code> file: <code class="literal">userid</code> and <code class="literal">password</code> lines received by e-mail should be added, and <code class="literal">server</code> should be replaced with <code class="literal">broker.freenet6.net</code>.
		</div><div class="para"><p></p>
			IPv6 connectivity is proposed to all machines on a local network by adding the three following directives to the <code class="filename">/etc/tsp/tspc.conf</code> file (assuming the local network is connected to the eth0 interface):
		</div><pre class="programlisting">
host_type=router
prefix_len=48
if_prefix=eth0
</pre><div class="para"><p></p>
			The machine then becomes the access router for a subnet with a 48-bit prefix. Once the tunnel is aware of this change, the local network must be told about it; this implies installing the <code class="command">radvd</code> daemon (from the similarly-named package). This IPv6 configuration daemon has a role similar to <code class="command">dhcpd</code> in the IPv4 world.
		</div><div class="para"><p></p>
			The <code class="filename">/etc/radvd.conf</code> configuration file must then be created (see <code class="filename">/usr/share/doc/radvd/examples/simple-radvd.conf</code> as a starting point). In our case, the only required change is the prefix, which needs to be replaced with the one provided by Freenet6; it can be found in the output of the <code class="command">ifconfig</code> command, in the block concerning the <code class="literal">tun</code> interface.
		</div><a id="idp9253480" class="indexterm"></a><div class="para"><p></p>
			Then run <code class="command">/etc/init.d/tspc restart</code> and <code class="command">/etc/init.d/radvd start</code>, and the IPv6 network should work.
		</div><div class="sidebar fil"><div class="titlepage"><div><div><h6><span class="emphasis"><em>TIP</em></span> Programs built with IPv6</h6></div></div></div><div class="para"><p></p>
			Many pieces of software need to be adapted to handle IPv6. Most of the packages in Debian <span class="distribution distribution">Squeeze</span> have been adapted already, but not all. A few volunteers had previously created a package archive dedicated to software specially rebuilt for IPv6; this archive was decommissioned in March 2007, both for lack of time and for lack of interest (since most of the patches have been integrated into the official packages). If your favourite package does not work with IPv6 yet, help can be found on the <span class="emphasis"><em>debian-ipv6</em></span> mailing-list. <div xmlns="" class="url">→ <a xmlns="http://www.w3.org/1999/xhtml" href="http://lists.debian.org/debian-ipv6/">http://lists.debian.org/debian-ipv6/</a></div>
		</div></div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>CAUTION</em></span> IPv6 and firewalls</h6></div></div></div><a id="idp10737256" class="indexterm"></a><a id="idp10737720" class="indexterm"></a><a id="idp10738440" class="indexterm"></a><div class="para"><p></p>
			Native IPv6 (as opposed to a tunnel over IPv4) requires the firewall to accept the traffic, which uses IP protocol number 41. Connections can still be restricted, in the same fashion as for IPv4: the standard Debian kernels include an adaptation of <span class="emphasis"><em>netfilter</em></span> for IPv6. This IPv6-enabled <span class="emphasis"><em>netfilter</em></span> is configured in a similar fashion to its IPv4 counterpart, except the program to use is <code class="command">ip6tables</code> instead of <code class="command">iptables</code>.
		</div></div></div><div id="site_footer"></div><script type="text/javascript">
		$("#site_footer").load("../../../../../footer.html");
	</script><ul class="docnav"><li class="previous"><a accesskey="p" href="sect.dynamic-routing.html"><strong>Prev</strong>10.4. Dynamic Routing</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="sect.domain-name-servers.html"><strong>Next</strong>10.6. Domain Name Servers (DNS)</a></li></ul></body></html>
