<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>6.4. Frontends: aptitude, synaptic</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="generator" content="publican 3.0" /><meta name="package" content="Debian-debian-handbook-6.0-en-US-1.0-1" /><meta name="keywords" content="apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link rel="home" href="index.html" title="The Debian Administrator's Handbook" /><link rel="up" href="apt.html" title="Chapter 6. Maintenance and Updates: The APT Tools" /><link rel="prev" href="sect.apt-cache.html" title="6.3. The apt-cache Command" /><link rel="next" href="sect.package-authentication.html" title="6.5. Checking Package Authenticity" /></head><body><p class="hidden" id="title"><a class="left" href="http://www.debian.org"><img src="Common_Content/images/image_left.png" alt="Product Site" /></a><a class="right" href="http://debian-handbook.info"><img src="Common_Content/images/image_right.png" alt="Documentation Site" /></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="sect.apt-cache.html"><strong>Prev</strong></a></li><li class="home">The Debian Administrator's Handbook</li><li class="next"><a accesskey="n" href="sect.package-authentication.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h2 class="title" id="sect.apt-frontends">6.4. Frontends: <code class="command">aptitude</code>, <code class="command">synaptic</code></h2></div></div></div><a id="idp13071440" class="indexterm"></a><a id="idp13072000" class="indexterm"></a><a id="idp13072560" class="indexterm"></a><div class="para"><p></p>
			APT is a C++ program whose code mainly resides in the <code class="command">libapt-pkg</code> shared library. Using a shared library facilitates the creation of user interfaces (front-ends), since the code contained in the library can easily be reused. Historically, <code class="command">apt-get</code> was only designed as a test front-end for <code class="command">libapt-pkg</code> but its success tends to obscure this fact.
		</div><div class="section"><div class="titlepage"><div><div><h3 class="title" id="aptitude">6.4.1.  <code class="command">aptitude</code> </h3></div></div></div><div class="para"><p></p>
				<code class="command">aptitude</code> is an interactive program that can be used in semi-graphical mode on the console. You can browse the list of installed and available packages, look up all the available information, and select packages to install or remove. The program is designed specifically to be used by administrators, so that its default behaviors are much more intelligent than <code class="command">apt-get</code>'s, and its interface much easier to understand.
			</div><div class="figure"><div class="figure-contents"><div class="mediaobject"><img src="images/aptitude.png" alt="The aptitude package manager" /></div></div><h6>Figure 6.1. The <code class="command">aptitude</code> package manager</h6></div><br class="figure-break" /><div class="para"><p></p>
				When it starts, <code class="command">aptitude</code> shows a list of packages sorted by state (installed, non-installed, or installed but not available on the mirrors — other sections display tasks, virtual packages, and new packages that appeared recently on mirrors). To facilitate thematic browsing, other views are available. In all cases, <code class="command">aptitude</code> displays a list combining categories and packages on the screen. Categories are organized through a tree structure, whose branches can respectively be unfolded or closed with the <span class="keycap"><strong>Enter</strong></span>, <span class="keycap"><strong>[</strong></span> and <span class="keycap"><strong>]</strong></span> keys. <span class="keycap"><strong>+</strong></span> should be used to mark a package for installation, <span class="keycap"><strong>-</strong></span> to mark it for removal and <span class="keycap"><strong>_</strong></span> to purge it (note than these keys can also be used for categories, in which case the corresponding actions will be applied to all the packages of the category). <span class="keycap"><strong>u</strong></span> updates the lists of available packages and <span class="keycap"><strong>Shift</strong></span>+<span class="keycap"><strong>u</strong></span> prepares a global system upgrade. <span class="keycap"><strong>g</strong></span> switches to a summary view of the requested changes (and typing <span class="keycap"><strong>g</strong></span> again will apply the changes), and <span class="keycap"><strong>q</strong></span> quits the current view. If you are in the initial view, this will effectively close <code class="command">aptitude</code>.
			</div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>DOCUMENTATION</em></span> <code class="command">aptitude</code></h6></div></div></div><div class="para"><p></p>
				This section does not cover the finer details of using <code class="command">aptitude</code>, it rather focuses on giving you a survival kit to use it. <code class="command">aptitude</code> is rather well documented and we advise you to use its complete manual available in the <span class="pkg pkg">aptitude-doc-en</span> package. <div xmlns="" class="url">→ <a xmlns="http://www.w3.org/1999/xhtml" href="file:///usr/share/doc/aptitude/html/en/index.html">file:///usr/share/doc/aptitude/html/en/index.html</a></div>
			</div></div><div class="para"><p></p>
				To search for a package, you can type <span class="keycap"><strong>/</strong></span> followed by a search pattern. This pattern matches the name of the package, but can also be applied to the description (if preceded by <code class="literal">~d</code>), to the section (with <code class="literal">~s</code>) or to other characteristics detailed in the documentation. The same patterns can filter the list of displayed packages: type the <span class="keycap"><strong>l</strong></span> key (as in <span class="foreignphrase"><em class="foreignphrase">limit</em></span>) and enter the pattern.
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title" id="idp13088384">6.4.1.1. Tracking Automatically Installed Packages</h4></div></div></div><div class="para"><p></p>
					One of the essential functionnalities of <code class="command">aptitude</code> (which has also been integrated to <code class="command">apt-get</code> since <span class="distribution distribution">Lenny</span>) is the tracking of packages installed only through dependencies. These packages are called “automatic” and are tagged with an “A” in the list of packages — they often include libraries for instance. When a package is removed, the corresponding automatic packages are also selected for removal unless another “manually installed” package depends on them. It is possible to mark a package as automatic (with <span class="keycap"><strong>Shift</strong></span>+<span class="keycap"><strong>m</strong></span>) or to remove the mark (<span class="keycap"><strong>m</strong></span> key). When maintaining a system with <code class="command">aptitude</code>, it is a good habit to mark as automatic any package that you don't need directly so that they are automatically removed when they aren't necessary anymore. You can either navigate the list of installed packages and play with <span class="keycap"><strong>Shift</strong></span>+<span class="keycap"><strong>m</strong></span>, or apply the flag to entire sections (for example the <code class="literal">libs</code> section). This habit can help you to keep your system tidy and offers a simple way to visualize the packages in use on a machine, without all the libraries and dependencies that you don't really care about. The related pattern that can be used with <span class="keycap"><strong>l</strong></span> (to activate the filter mode) is <code class="literal">~i!~M</code>. It specifies that you only want to see installed packages (<code class="literal">~i</code>) not marked as automatic (<code class="literal">!~M</code>).
				</div><div class="para"><p></p>
					People might want to know why an automatically installed package is present on the system. To get this information from the command-line, you can use <code class="command">aptitude why <em class="replaceable"><code>package</code></em></code>:
				</div><pre class="screen"><code class="computeroutput">$ </code><strong class="userinput"><code> aptitude why python-debian</code></strong>
<code class="computeroutput">i   aptitude         Recommends apt-xapian-index         
i A apt-xapian-index Depends    python-debian (&gt;= 0.1.15)</code>
</pre><a id="idp13095736" class="indexterm"></a><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>WORTH FOLLOWING</em></span> Recent evolutions of <code class="command">apt-get</code> and <code class="command">aptitude</code></h6></div></div></div><div class="para"><p></p>
					Some of the advantages that <code class="command">aptitude</code> historically had over <code class="command">apt-get</code> have recently disappeared. For instance, since the release of <span class="distribution distribution">Lenny</span>, <code class="command">apt-get</code> memorizes the packages that have been installed only to satisfy dependencies, just like <code class="command">aptitude</code> has always done. It can also follow recommendations expressed by one package on another.
				</div><div class="para"><p></p>
					Among the recent evolutions of <code class="command">aptitude</code>, a new version with a graphical interface is currently being developed. Even if it's available in <span class="distribution distribution">Squeeze</span> (in the separate <span class="pkg pkg">aptitude-gtk</span> package), it's not complete yet and is subject to stability issues.
				</div></div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>TOOL</em></span> Using <code class="command">aptitude</code> on the command-line interface</h6></div></div></div><div class="para"><p></p>
					Most of <code class="command">aptitude</code>'s features are accessible via the interactive interface as well as via command-lines. These command-lines will seem familiar to regular users of <code class="command">apt-get</code> and <code class="command">apt-cache</code>.
				</div><div class="para"><p></p>
					The advanced features of <code class="command">aptitude</code> are also available on the command-line. You can use the same package search patterns as in the interactive version. For example, if you want to run the previously suggested cleanup of “automatic” packages, and if you know that none of the locally installed programs require any particular libraries or Perl modules, you can mark the corresponding packages as automatic with a single command:
				</div><pre class="screen"><code class="computeroutput"># </code><strong class="userinput"><code>aptitude markauto '~slibs|~sperl'</code></strong></pre><div class="para"><p></p>
					Here, you can clearly see the power of the search pattern system of <code class="command">aptitude</code>, which enables the instant selection of all the packages in the <code class="literal">libs</code> and <code class="literal">perl</code> sections.
				</div><div class="para"><p></p>
					Beware, if some packages are marked as automatic and if no other package depends on them, they will be removed immediately (after a confirmation request).
				</div></div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>ALTERNATIVE</em></span> <code class="command">deborphan</code> and <code class="command">debfoster</code></h6></div></div></div><div class="para"><p></p>
					Before <code class="command">aptitude</code> came to life with its tracking of automatic packages, there were two utilities producing lists of unnecessary packages: <code class="command">deborphan</code> and <code class="command">debfoster</code>.
				</div><div class="para"><p></p>
					<code class="command">deborphan</code> is the most rudimentary of both. It simply scans the <code class="literal">libs</code> and <code class="literal">oldlibs</code> sections (in the absence of supplementary instructions) looking for the packages that are currently installed and that no other packages depends on. The resulting list can then serve as a basis to remove unneeded packages.
				</div><div class="para"><p></p>
					<code class="command">debfoster</code> has a more elaborate approach, very similar to <code class="command">aptitude</code>'s: it maintains a list of packages that have been explicitly installed, and remembers what packages are really required between each invocation. If new packages appear on the system and if <code class="command">debfoster</code> doesn't know them as required packages, they will be shown on the screen together with a list of their dependencies. The program then offers a choice: remove the package (possibly together with those that depend on it), mark it as explicitly required, or ignore it temporarily.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title" id="idp13110192">6.4.1.2. Managing Recommendations, Suggestions and Tasks</h4></div></div></div><div class="para"><p></p>
					Another interesting feature of <code class="command">aptitude</code> is the fact that it respects recommendations between packages while still giving users the choice not to install them on a case by case basis. For example, the <span class="pkg pkg">gnome-desktop-environment</span> package recommends <span class="pkg pkg">gnome-accessibility</span> (among others). When you select the former for installation, the latter will also be selected (and marked as automatic if not already installed on the system). Typing <span class="keycap"><strong>g</strong></span> will make it obvious: <span class="pkg pkg">gnome-accessibility</span> appears on the summary screen of pending actions in the list of packages installed automatically to satisfy dependencies. However, you can decide not to install it by deselecting it before confirming the operations.
				</div><div class="para"><p></p>
					Note that this recommendation tracking feature does not apply to upgrades. For instance, if a new version of <span class="pkg pkg">gnome-desktop-environment</span> recommends a package that it did not recommend formerly, the package won't be marked for installation. However, it will be listed on the upgrade screen so that the administrator can still select it for installaion.
				</div><div class="para"><p></p>
					Suggestions between packages are also taken into account, but in a manner adapted to their specific status. For example, since <span class="pkg pkg">gnome-desktop-environment</span> suggests <span class="pkg pkg">gnome-audio</span>, the latter will be displayed on the summary screen of pending actions (in the section of packages suggested by other packages). This way, it is visible and the administrator can decide whether to take the suggestion into account or not. Since it is only a suggestion and not a dependency or a recommendation, the package will not be selected automatically — its selection requires a manual intervention from the user (thus, the package will not be marked as automatic).
				</div><div class="para"><p></p>
					In the same spirit, remember that <code class="command">aptitude</code> makes intelligent use of the concept of task. Since tasks are displayed as categories in the screens of package lists, you can either select a full task for installation or removal, or browse the list of packages included in the task to select a smaller subset.
				</div></div><div class="section"><div class="titlepage"><div><div><h4 class="title" id="idp13116480">6.4.1.3. Better Solver Algorithms</h4></div></div></div><div class="para"><p></p>
					To conclude this section, let's note that <code class="command">aptitude</code> has more elaborate algorithms compared to <code class="command">apt-get</code> when it comes to resolving difficult situations. When a set of actions is requested and when these combined actions would lead to an incoherent system, <code class="command">aptitude</code> evaluates several possible scenarios and presents them in order of decreasing relevance. However, these algorithms are not failproof. Fortunately there is always the possibility to manually select the actions to perform. When the currently selected actions lead to contradictions, the upper part of the screen indicates a number of “broken” packages (and you can directly navigate to those packages by pressing <span class="keycap"><strong>b</strong></span>). It is then possible to manually build a solution for the problems found. In particular, you can get access to the different available versions by simply selecting the package with <span class="keycap"><strong>Enter</strong></span>. If the selection of one of these versions solves the problem, you should not hesitate to use the function. When the number of broken packages gets down to zero, you can safely go the summary screen of pending actions for a last check before you apply them.
				</div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>NOTE</em></span> <code class="command">aptitude</code>'s log</h6></div></div></div><div class="para"><p></p>
					Like <code class="command">dpkg</code>, <code class="command">aptitude</code> keeps a trace of executed actions in its logfile (<code class="filename">/var/log/aptitude</code>). However, since both commands work at a very different level, you cannot find the same information in their respective logfiles. While <code class="command">dpkg</code> logs all the operations executed on individual packages step by step, <code class="command">aptitude</code> gives a broader view of high-level operations like a system-wide upgrade.
				</div><div class="para"><p></p>
					Beware, this logfile only contains a summary of operations performed by <code class="command">aptitude</code>. If other front-ends (or even <code class="command">dpkg</code> itself) are occasionaly used, then <code class="command">aptitude</code>'s log will only contain a partial view of the operations, so you can't rely on it to build a trustworthy history of the system.
				</div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title" id="idp13123504">6.4.2.  <code class="command">synaptic</code> </h3></div></div></div><div class="para"><p></p>
				<code class="command">synaptic</code> is a graphical package manager for Debian which features a clean and efficient graphical interface based on GTK+/GNOME. Its many ready-to-use filters give fast access to newly available packages, installed packages, upgradable packages, obsolete packages and so on. If you browse through these lists, you can select the operations to be done on the packages (install, upgrade, remove, purge); these operations are not performed immediately, but put into a task list. A single click on a button then validates the operations, and they are performed in one go.
			</div><div class="figure"><div class="figure-contents"><div class="mediaobject"><img src="images/synaptic.png" alt="synaptic package manager" /></div></div><h6>Figure 6.2. <code class="command">synaptic</code> package manager</h6></div><br class="figure-break" /></div></div><div id="site_footer"></div><script type="text/javascript">
		$("#site_footer").load("../../../../../footer.html");
	</script><ul class="docnav"><li class="previous"><a accesskey="p" href="sect.apt-cache.html"><strong>Prev</strong>6.3. The apt-cache Command</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="sect.package-authentication.html"><strong>Next</strong>6.5. Checking Package Authenticity</a></li></ul></body></html>
